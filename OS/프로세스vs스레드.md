# Process vs Thread



### 프로세스의 개념

* 프로세스란 하나의 작업 단위

* 프로그램을 실행하면 프로세스가 되어 사용자가 지시한 작업을 마무리

* 프로그램 ≠ 프로세스

* 프로그램은 어떤 데이터를 어떤식으로 사용할지 적어놓은 것

* 프로세스는 그 적어놓은 내용을 실행에 옮기는 것



### 프로그램 프로세스 전환

* 프로그램 실행 시 프로그램을 메모리로 가져오며 프로세스 제어블록(PCB)을 생성함
* 프로세스 제어블록에는 다양한 정보가 있으며 대표적인 3가지를 꼽자면 프로세스 구분자, 메모리 관련정보, 그리고 중간값이 있다.
  * 프로세스 구분자 : 프로세스들을 구분하기 위한 ID
  * 메모리 관련 정보 : 실행하려는 프로세스가 메모리의 어디에 저장되어 있는지를 저장하는 정보
  * 각종 중간값 : 멀티 프로세스에서 실행중 다른 프로세스의 작업을 시작하게 될 경우, 다음에 실행해야할 코드의 정보를 기록
* 프로그램이 프로세스가 된다는 것은 프로세스 제어블록이 생성된다는 것이고, 프로그램이 된다는 것은 프로세스 제어블록이 폐기 된다는 뜻

* 프로그램 + 프로세스 제어블록 = 프로세스



### 프로세스의 상태
![164220617-671c4d79-c225-468f-8abb-0e81547fc607](https://user-images.githubusercontent.com/74582442/164220836-63d2df5a-c305-4f47-8cd7-35e94fe2f938.png)
* 생성 상태 : 프로세스가 메모리에 올라와 실행준비가 완료된 상태, 이 때 프로세스 제어블록이 생성된다.
* 준비 상태 : 생성된 프로세스가 CPU를 얻을 때 까지 대기하는 상태
* 실행 상태 : 준비 상태에서 CPU를 얻어 실제 작업을 수행하는 상태 주어진 시간 안에 작업이 모두 완료되면 완료상태로 완료 못했을 경우에는 다시 준비상태로 돌아간다.
* 완료 상태 : 주어진 작업을 모두 완료한 상태로 프로세스 제어블록이 사라진 상태이다. 
* 대기 상태 : 입출력을 요구하는 경우에 입출력 받기 위해 대기하는 상태를 의미한다.

##### 그 외의 상태들

* 휴식 상태 : 작업을 일시적으로 쉬고 있는 상태, 작업 프로세스에서 Ctrl+Z를 누르게 될 경우 진입하는 상태로, PCB가 유지되어 있기 때문에 종료된 것 처럼 보여도 도중부터 실행이 가능하다. 완전히 종료하고 싶다면 Ctrl+C를 누르자

* 보류 상태 : 메모리에서 잠시 쫓겨난 상태
  * 메모리가 꽉 차서 일부 프로세스를 쫓아낼 때
  * 프로그램에 오류가 있어 실행을 미룰 때
  * 바이러스 또는 악의적인 공격이라고 운영체제가 판단했을 경우
  * 매우 긴 주기로 반복되는 프로세스라 메모리 밖으로 나가도 상관 없을 때
  * 입출력을 기다리는데 이 대기시간이 길어질 때



### 스레드의 개념

* 프로세스의 코드에 정의된 절차에 따라 CPU에 작업 요청을 하는 실행 단위
* 요리에 빗대어 표현하면 스테이크 조리는 프로세스, 고기손질, 소금 후추 뿌리기, 고기 굽기 등은 스레드에 해당
* 만약 이런 조리를 하는 담당 요리사가 둘 이상이라 분업을 한다면 멀티스레드라고 할 수 있다.
* 프로세스와의 차이
  * 프로세스는 서로 약하게 연결되어 한 쪽 프로세스에 다른 프로세스가 거의 영향을 받지 않는다.
  * 스레드는 서로 강하게 연결되어 한 스레드의 진행 상황이 다른 스레드의 진행에 영향을 끼칠 수 있다.
  * 예를 들면 스테이크 한접시를 요리할 때 채소 굽기와 스테이크 굽기는 서로 영향이 없지만, 스테이크 굽기와 소스 뿌리기는 명확히 전후 관계가 나뉘어져 있다. 

### 멀티스레드의 장단점

* 장점
  * 응답성 향상 : 한 스레드의 작업이 진행되지 않더라도 다른 스레드가 작업을 지속하여 사용자의 작업 요구에 빨리 응답 가능
  * 자원 공유 : 한 프로세스 내에서 여러 개의 스레드 생성 시 프로세스의 자원을 모든 스레드가 공유할 수 있다.
  * 효율성 향상 : 여러 개의 프로세스 생성과 달리 멀티스레드는 불필요한 자원의 중복을 막아준다.
  * 다중 CPU 지원 : CPU가 2개 이상인 경우, 멀티스레드를 통해 다중 CPU가 멀티스레드를 동시에 처리하며 CPU사용량과 프로세스 처리시간이 크게 단축된다.
* 단점
  * 스레드는 서로 영향을 끼치기 쉽고 자원을 공유하기 때문에 한 스레드에 문제가 생길 경우 전체 프로세스에 영향이 생김